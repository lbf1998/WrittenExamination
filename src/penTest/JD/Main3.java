package penTest.JD;

import java.util.*;

public class Main3 {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
//        String str = scanner.next();
        // 遍历所有子串，求每个子串的权值
        String str = "())())";

        int res = 0;
        int score = 0;
        for (int i = 0; i < str.length(); i++) {
            for (int j = i+1; j <= str.length(); j++) {
                if (j - i < 2) continue;
                if (str.charAt(j - 1) == '('){
                    res += score;
                    continue;
                }
                String substring = str.substring(i, j);
                score = getSorce(substring);
                res += score;
            }
        }
        System.out.println(res);
    }

    private static int getSorce(String substring) {
        int score = 0;
        Deque<Character> stack = new LinkedList<>();
        for (int i = 0; i < substring.length(); i++) {
            char ch = substring.charAt(i);
            if (ch == '('){
                stack.push(ch);
            }else {
                while (!stack.isEmpty() && stack.peek().equals(')')){
                    stack.pop();
                }
                if (!stack.isEmpty() && stack.peek().equals('(')){
                    score += 2;
                    stack.pop();
                }
            }
        }
        return score;
    }
}
